<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="./../../../../../../Include/Javascript/common_en-US.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "./../../../../../../";
				var pageid = 0;
				var heroimage = "./../../../../../../Images/ue5-hero.png";
				var lang = "en-US";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/API/Plugins/SQLiteCore/sqlite/sqlite3changeset_apply/" />');
				var udnCSS = './../../../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				var udnOverrideCSS = './../../../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = './../../../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = './../../../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = './../../../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = './../../../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = './../../../../../../Include/CSS/prettify.css';
		var navbarCSS = './../../../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = './../../../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = './../../../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>sqlite3changeset_apply | Unreal Engine 5.2 Documentation</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="./../../../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="./../../../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="./../../../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="./../../../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="./../../../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="./../../../../../../Include/Images/site_icon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="./../../../../../../Include/Images/site_icon.png" type="image/x-icon" />
    <link async href="./../../../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="./../../../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="./../../../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="./../../../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="./../../../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/API/Plugins/SQLiteCore/sqlite/sqlite3changeset_apply/" hreflang="x-default" />

	<meta name="title" content="sqlite3changeset_apply" />
<meta name="description" content="CAPI3REF: Apply A Changeset To A Database" />
<meta name="availability" content="Public" />
<meta name="crumbs" content="%ROOT%,API,API/Plugins,API/Plugins/SQLiteCore,API/Plugins/SQLiteCore/sqlite" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="sqlite3changeset_apply" />
	<meta property="og:description" content="CAPI3REF: Apply A Changeset To A Database" />
		<meta property="og:image" content="https://docs.unrealengine.com/5.1/Images/placeholder-social.png" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com';</script>
	<script src="https://tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">
						<div id="head">
				<div id="logo"></div>
			</div>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">
<span id="versionContainer">
	<span id="versionSelect" class="btn btn-version" onclick="ToggleMenu($('#versionMenu'), $(this));"></span>
	<div id="versionMenu">
		<div id="4_26" data-version="4.26" class="btn btn-select" onclick="createCookie('version', '4.26', 365);SwitchVersion('4.26');">Unreal Engine 4.26 Documentation</div>
		<div id="4_27" data-version="4.27" class="btn btn-select" onclick="createCookie('version', '4.27', 365);SwitchVersion('4.27');">Unreal Engine 4.27 Documentation</div>
		<div id="5_0" data-version="5.0" class="btn btn-select" onclick="createCookie('version', '5.0', 365);SwitchVersion('5.0');">Unreal Engine 5.0 Documentation</div>
		<div id="5_1" data-version="5.1" class="btn btn-select" onclick="createCookie('version', '5.1', 365);SwitchVersion('5.1');">Unreal Engine 5.1 Documentation</div>
		<div id="5_2" data-version="5.2" class="btn btn-select" onclick="createCookie('version', '5.2', 365);SwitchVersion('5.2');">Unreal Engine 5.2 Documentation</div>
		<div id="5_3" data-version="5.3" class="btn btn-select" onclick="createCookie('version', '5.3', 365);SwitchVersion('5.3');">Unreal Engine 5.3 Documentation</div>
	</div>
</span>
	<span class="separator">></span> <a id="parent_link" href="../../../../../API">Unreal Engine API Reference</a>

	<span class="separator">></span> <a id="parent_link" href="../../../../Plugins">Plugins</a>

	<span class="separator">></span> <a id="parent_link" href="../../../SQLiteCore">SQLiteCore</a>

	<span class="separator">></span> <a id="parent_link" href="../../sqlite">sqlite</a>

<span class="separator">></span> <span id="page">sqlite3changeset_apply</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/en-US/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="./../../../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="Documentation" />
						<input type="text" name="keyword" placeholder="Search Documentation..." class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			<nav id="navPanel">
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
										<div class="hero  background">
	<div class="imgContainer"><img src="./../../../../../../Images/ue5-hero.png" /></div>	<div class="info">
		<div id="pageTitle">
			<h1 id="H1TitleId">sqlite3changeset_apply</h1>
		</div>
		<h2 >CAPI3REF: Apply A Changeset To A Database</h2>
		<div id="access">
			<div class="accessContainer">
															</div>
		</div>
	</div>
</div>															<div id="maincol">
																																				<div class="heading expanded" onclick="sectionOnClick(this, 'references');">
        <p>References</p>
    </div>
<div id="references">
    <div class="member-list">
	<table cellspacing="0">
		<tr class="normal-row">
	<td class="name-cell">
		<p>Module</p>
	</td>
	<td class="desc-cell">
		<p><a id="content_link" href="../.." ><span>SQLiteCore</span></a></p>
	</td>
</tr>
		<tr class="normal-row">
	<td class="name-cell">
		<p>Header</p>
	</td>
	<td class="desc-cell">
		<p>&#47;Engine&#47;Plugins&#47;Runtime&#47;Database&#47;SQLiteCore&#47;Source&#47;SQLiteCore&#47;Public&#47;sqlite&#47;sqlite3.h</p>
	</td>
</tr>
		<tr class="normal-row">
	<td class="name-cell">
		<p>Include</p>
	</td>
	<td class="desc-cell">
		<p>&#35;include &quot;sqlite&#47;sqlite3.h&quot;</p>
	</td>
</tr>
			</table>
</div>

</div><div class="heading expanded" onclick="sectionOnClick(this, 'syntax');">
        <p>Syntax</p>
    </div>
<div id="syntax">
    <div class="simplecode_api">
	<p>int sqlite3changeset_apply<br />&#40;<br />&nbsp;&nbsp;&nbsp;&nbsp;<a id="content_link" href="../sqlite3" ><span>sqlite3</span></a> &#42; db,<br />&nbsp;&nbsp;&nbsp;&nbsp;int nChangeset,<br />&nbsp;&nbsp;&nbsp;&nbsp;void &#42; pChangeset,<br />&nbsp;&nbsp;&nbsp;&nbsp;int(&#42;)(                   void &#42;pCtx,                                                                                                                                                                                                                                                                                               const char &#42;zTab                                                                                                                                                                                   ) xFilter,<br />&nbsp;&nbsp;&nbsp;&nbsp;int(&#42;)(                   void &#42;pCtx,                                                                                                                                                                                                                                                                                               int eConflict,                                                                                                                                                                                                                                               <a id="content_link" href="../sqlite3_changeset_iter" ><span>sqlite3_changeset_iter</span></a> &#42;p                                   ) xConflict,<br />&nbsp;&nbsp;&nbsp;&nbsp;void &#42; pCtx<br />&#41;  </p>
</div>
</div><div class="heading expanded" onclick="sectionOnClick(this, 'description');">
        <p>Remarks</p>
    </div>
<div id="description">
    <p>CAPI3REF: Apply A Changeset To A Database
</p><p>Apply a changeset or patchset to a database. These functions attempt to update the "main" database attached to handle db with the changes found in the changeset passed via the second and third arguments.
</p><p>The fourth argument (xFilter) passed to these functions is the "filter
callback". If it is not NULL, then for each table affected by at least one change in the changeset, the filter callback is invoked with the table name as the second argument, and a copy of the context pointer passed as the sixth argument as the first. If the "filter callback" returns zero, then no attempt is made to apply any changes to the table. Otherwise, if the return value is non-zero or the xFilter argument to is NULL, all changes related to the table are attempted.
</p><p>For each table that is not excluded by the filter callback, this function tests that the target database contains a compatible table. A table is considered compatible if all of the following are true:
</p><ul ><li class="Default"><p>The table has the same name as the name recorded in the changeset, and 
</p></li><li class="Default"><p>The table has at least as many columns as recorded in the changeset, and 
</p></li><li class="Default"><p>The table has primary key columns in the same position as recorded in the changeset.
</p></li></ul><p>If there is no compatible table, it is not an error, but none of the changes associated with the table are applied. A warning message is issued via the <a id="content_link" href="../sqlite3_log" ><span>sqlite3_log()</span></a> mechanism with the error code SQLITE_SCHEMA. At most one such warning is issued for each table in the changeset.
</p><p>For each change for which there is a compatible table, an attempt is made to modify the table contents according to the UPDATE, INSERT or DELETE change. If a change cannot be applied cleanly, the conflict handler function passed as the fifth argument to <a id="content_link" href="" ><span>sqlite3changeset_apply()</span></a> may be invoked. A description of exactly when the conflict handler is invoked for each type of change is below.
</p><p>Unlike the xFilter argument, xConflict may not be passed NULL. The results of passing anything other than a valid function pointer as the xConflict argument are undefined.
</p><p>Each time the conflict handler function is invoked, it must return one of [SQLITE_CHANGESET_OMIT], [SQLITE_CHANGESET_ABORT] or [SQLITE_CHANGESET_REPLACE]. SQLITE_CHANGESET_REPLACE may only be returned if the second argument passed to the conflict handler is either SQLITE_CHANGESET_DATA or SQLITE_CHANGESET_CONFLICT. If the conflict-handler returns an illegal value, any changes already made are rolled back and the call to <a id="content_link" href="" ><span>sqlite3changeset_apply()</span></a> returns SQLITE_MISUSE. Different actions are taken by <a id="content_link" href="" ><span>sqlite3changeset_apply()</span></a> depending on the value returned by each invocation of the conflict-handler function. Refer to the documentation for the three [SQLITE_CHANGESET_OMIT|available return values] for details.
</p><p>DELETE Changes
</p><p>For each DELETE change, the function checks if the target database contains a row with the same primary key value (or values) as the original row values stored in the changeset. If it does, and the values stored in all non-primary key columns also match the values stored in the changeset the row is deleted from the target database.
</p><p>If a row with matching primary key values is found, but one or more of the non-primary key fields contains a value different from the original row value stored in the changeset, the conflict-handler function is invoked with [SQLITE_CHANGESET_DATA] as the second argument. If the database table has more columns than are recorded in the changeset, only the values of those non-primary key fields are compared against the current database contents - any trailing database table columns are ignored.
</p><p>If no row with matching primary key values is found in the database, the conflict-handler function is invoked with [SQLITE_CHANGESET_NOTFOUND] passed as the second argument.
</p><p>If the DELETE operation is attempted, but SQLite returns SQLITE_CONSTRAINT (which can only happen if a foreign key constraint is violated), the conflict-handler function is invoked with [SQLITE_CHANGESET_CONSTRAINT] passed as the second argument. This includes the case where the DELETE operation is attempted because an earlier call to the conflict handler function returned [SQLITE_CHANGESET_REPLACE].
</p><p>INSERT Changes
</p><p>For each INSERT change, an attempt is made to insert the new row into the database. If the changeset row contains fewer fields than the database table, the trailing fields are populated with their default values.
</p><p>If the attempt to insert the row fails because the database already contains a row with the same primary key values, the conflict handler function is invoked with the second argument set to [SQLITE_CHANGESET_CONFLICT].
</p><p>If the attempt to insert the row fails because of some other constraint violation (e.g. NOT NULL or UNIQUE), the conflict handler function is invoked with the second argument set to [SQLITE_CHANGESET_CONSTRAINT]. This includes the case where the INSERT operation is re-attempted because an earlier call to the conflict handler function returned [SQLITE_CHANGESET_REPLACE].
</p><p>UPDATE Changes
</p><p>For each UPDATE change, the function checks if the target database contains a row with the same primary key value (or values) as the original row values stored in the changeset. If it does, and the values stored in all modified non-primary key columns also match the values stored in the changeset the row is updated within the target database.
</p><p>If a row with matching primary key values is found, but one or more of the modified non-primary key fields contains a value different from an original row value stored in the changeset, the conflict-handler function is invoked with [SQLITE_CHANGESET_DATA] as the second argument. Since UPDATE changes only contain values for non-primary key fields that are to be modified, only those fields need to match the original values to avoid the SQLITE_CHANGESET_DATA conflict-handler callback.
</p><p>If no row with matching primary key values is found in the database, the conflict-handler function is invoked with [SQLITE_CHANGESET_NOTFOUND] passed as the second argument.
</p><p>If the UPDATE operation is attempted, but SQLite returns SQLITE_CONSTRAINT, the conflict-handler function is invoked with [SQLITE_CHANGESET_CONSTRAINT] passed as the second argument. This includes the case where the UPDATE operation is attempted after an earlier call to the conflict handler function returned [SQLITE_CHANGESET_REPLACE]. 
</p><p>It is safe to execute SQL statements, including those that write to the table that the callback related to, from within the xConflict callback. This can be used to further customize the application's conflict resolution strategy.
</p><p>All changes made by these functions are enclosed in a savepoint transaction. If any other error (aside from a constraint failure when attempting to write to the target database) occurs, then the savepoint transaction is rolled back, restoring the target database to its original state, and an SQLite error code returned.
</p><p>If the output parameters (ppRebase) and (pnRebase) are non-NULL and the input is a changeset (not a patchset), then <a id="content_link" href="../sqlite3changeset_apply_v2" ><span>sqlite3changeset_apply_v2()</span></a> may set (&#42;ppRebase) to point to a "rebase" that may be used with the sqlite3_rebaser APIs buffer before returning. In this case (&#42;pnRebase) is set to the size of the buffer in bytes. It is the responsibility of the caller to eventually free any such buffer using <a id="content_link" href="../sqlite3_free" ><span>sqlite3_free()</span></a>. The buffer is only allocated and populated if one or more conflicts were encountered while applying the patchset. See comments surrounding the sqlite3_rebaser APIs for further details.
</p><p>The behavior of <a id="content_link" href="../sqlite3changeset_apply_v2" ><span>sqlite3changeset_apply_v2()</span></a> and its streaming equivalent may be modified by passing a combination of [SQLITE_CHANGESETAPPLY_NOSAVEPOINT | supported flags] as the 9th parameter.
</p><p>Note that the <a id="content_link" href="../sqlite3changeset_apply_v2" ><span>sqlite3changeset_apply_v2()</span></a> API is still <strong>experimental</strong> and therefore subject to change.</p>
</div><div class="syntax">
	
</div>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="recommendations"></div>			</div>
						<div id="footer"></div>			
									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				Help shape the future of Unreal Engine documentation! Tell us how we're doing so we can serve you better.
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AVVbJZwedR');createCookie('announcement-read', new Date().getTime(), 30);">Take our survey</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">Cancel</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div>
</body>
</html>
